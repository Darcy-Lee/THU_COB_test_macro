
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0014)about:internet -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>usb2nand.h</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 13pt;
    font-weight: 500;
}
</style>


<meta http-equiv="X-UA-Compatible" content="IE=8">
<style>
html {
	overflow-y:scroll;
}

body {
	background-image: url(../../template1/back.png);
	background-repeat: repeat-x;
	background-color: #FFFFFF;
	padding: 0px;
	margin-top: 15px;
	margin-left: 15px;
	margin-bottom: 15px;
	margin-right: 15px;
}

#winchm_template_button {
	position: fixed; 
	float: right; 
	right: 15px; 
	top: 15px;
}

#winchm_template_navigation {
	padding: 0px;
	margin-top: 0px;
	margin-left: 0px;
	margin-bottom: 15px;
	margin-right: 0px;

	font-size: 8pt;
	font-family: Arial, Helvetica, sans-serif;
	color: #4A4A4A;
	text-align: left;
}

#winchm_template_title {
	padding: 0px;
	margin-top: 15px;
	margin-left: 0px;
	margin-bottom: 15px;
	margin-right: 0px;

	font-family: Tahoma, Geneva, sans-serif;
	font-size: 22px;
	font-weight: bold;
	color: #005680;
	text-align: left;
}

#winchm_template_content{
	padding: 0px;
	margin-top: 15px;
	margin-left: 0px;
	margin-bottom: 15px;
	margin-right: 0px;

	width: auto  !important;
	width: 100%;
}


#winchm_template_footer {
	padding: 0px;
	margin-top: 15px;
	margin-left: 0px;
	margin-bottom: 15px;
	margin-right: 0px;

	padding-top: 7px;
	border-width: 1px;
	border-color: #c0c0c0;
	border-top-style: solid;

	font-family: Arial, Helvetica, sans-serif;
	font-size: 10px;
	color: #575757;
	text-align: left;
}

@media print
{
#winchm_template_button{
visibility:hidden;
}
}

#winchm_template_navigation a:link	{text-decoration: none;color: 004080}
#winchm_template_navigation a:visited  {text-decoration: none; color: #004080}
#winchm_template_navigation a:active {text-decoration: none; color: #004080}
#winchm_template_navigation a:hover {text-decoration: none;color: #0000FF}

a:link	{text-decoration: underline; color:#0033cc}
a:visited  {text-decoration: underline; color: #0033cc}
a:active {text-decoration: underline; color: #0033cc }
a:hover {text-decoration: underline;color: #ff0000;}

</style>
</head>
<style type="text/css"> .hll { background-color: #ffffcc }</style>
<style type="text/css">  { background: #ffffff; }</style>
<style type="text/css"> .c { color: #177500 } </style>
<style type="text/css"> .err { color: #000000 } </style>
<style type="text/css"> .k { color: #A90D91 } </style>
<style type="text/css"> .l { color: #1C01CE } </style>
<style type="text/css"> .n { color: #000000 } </style>
<style type="text/css"> .o { color: #000000 } </style>
<style type="text/css"> .ch { color: #177500 } </style>
<style type="text/css"> .cm { color: #177500 } </style>
<style type="text/css"> .cp { color: #633820 } </style>
<style type="text/css"> .cpf { color: #177500 } </style>
<style type="text/css"> .c1 { color: #177500 } </style>
<style type="text/css"> .cs { color: #177500 } </style>
<style type="text/css"> .kc { color: #A90D91 } </style>
<style type="text/css"> .kd { color: #A90D91 } </style>
<style type="text/css"> .kn { color: #A90D91 } </style>
<style type="text/css"> .kp { color: #A90D91 } </style>
<style type="text/css"> .kr { color: #A90D91 } </style>
<style type="text/css"> .kt { color: #A90D91 } </style>
<style type="text/css"> .ld { color: #1C01CE } </style>
<style type="text/css"> .m { color: #1C01CE } </style>
<style type="text/css"> .s { color: #C41A16 } </style>
<style type="text/css"> .na { color: #836C28 } </style>
<style type="text/css"> .nb { color: #A90D91 } </style>
<style type="text/css"> .nc { color: #3F6E75 } </style>
<style type="text/css"> .no { color: #000000 } </style>
<style type="text/css"> .nd { color: #000000 } </style>
<style type="text/css"> .ni { color: #000000 } </style>
<style type="text/css"> .ne { color: #000000 } </style>
<style type="text/css"> .nf { color: #000000 } </style>
<style type="text/css"> .nl { color: #000000 } </style>
<style type="text/css"> .nn { color: #000000 } </style>
<style type="text/css"> .nx { color: #000000 } </style>
<style type="text/css"> .py { color: #000000 } </style>
<style type="text/css"> .nt { color: #000000 } </style>
<style type="text/css"> .nv { color: #000000 } </style>
<style type="text/css"> .ow { color: #000000 } </style>
<style type="text/css"> .mb { color: #1C01CE } </style>
<style type="text/css"> .mf { color: #1C01CE } </style>
<style type="text/css"> .mh { color: #1C01CE } </style>
<style type="text/css"> .mi { color: #1C01CE } </style>
<style type="text/css"> .mo { color: #1C01CE } </style>
<style type="text/css"> .sa { color: #C41A16 } </style>
<style type="text/css"> .sb { color: #C41A16 } </style>
<style type="text/css"> .sc { color: #2300CE } </style>
<style type="text/css"> .dl { color: #C41A16 } </style>
<style type="text/css"> .sd { color: #C41A16 } </style>
<style type="text/css"> .s2 { color: #C41A16 } </style>
<style type="text/css"> .se { color: #C41A16 } </style>
<style type="text/css"> .sh { color: #C41A16 } </style>
<style type="text/css"> .si { color: #C41A16 } </style>
<style type="text/css"> .sx { color: #C41A16 } </style>
<style type="text/css"> .sr { color: #C41A16 } </style>
<style type="text/css"> .s1 { color: #C41A16 } </style>
<style type="text/css"> .ss { color: #C41A16 } </style>
<style type="text/css"> .bp { color: #5B269A } </style>
<style type="text/css"> .fm { color: #000000 } </style>
<style type="text/css"> .vc { color: #000000 } </style>
<style type="text/css"> .vg { color: #000000 } </style>
<style type="text/css"> .vi { color: #000000 } </style>
<style type="text/css"> .vm { color: #000000 } </style>
<style type="text/css"> .il { color: #1C01CE } </style>
<body><script language="JavaScript" type="text/JavaScript">
function syn(){
if(parent.nav.tree){
 if(parent.nav.tree.loaded){
  parent.nav.tree.selectNode(97);
 }else{
  setTimeout("syn()",500);
}
  }else{
  setTimeout("syn()",500);
  }}
if(parent!=self){
  setTimeout("syn()",100);
}else{
  parent.location.href = "../../../index.htm?page=API函数接口定义原型/C/usb2nand.htm";
}
originalOnload = window.onload;
if(originalOnload==null){
window.onload = function(){parent.contentLoaded = true;};
}else{
window.onload = function(){originalOnload();parent.contentLoaded = true;};
}
</script> 

<div id="winchm_template_button"><A href="usb2lin_ex.htm" title="Previous topic"><img id="winchm_template_prev" alt="Previous topic" src="../../template1/btn_prev_n.gif" border="0"></a><A href="usb2openbus.htm" title="Next topic"><img id="winchm_template_next" alt="Next topic" src="../../template1/btn_next_n.gif" border="0"></a></div>
<div id="winchm_template_navigation">Help &gt; 
<A href="../函数原型.htm">函数原型</A> &gt; </div>
<div id="winchm_template_title">usb2nand.h</div>
<div id="winchm_template_content">
<div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">  ******************************************************************************</span>
<span class="cm">  * @file    usb2nand.h</span>
<span class="cm">  * $Author: wdluo $</span>
<span class="cm">  * $Revision: 447 $</span>
<span class="cm">  * $Date:: 2013-06-29 18:24:57 +0800 #$</span>
<span class="cm">  * @brief   usb2nand相关函数和数据类型定义.</span>
<span class="cm">  ******************************************************************************</span>
<span class="cm">  * @attention</span>
<span class="cm">  *</span>
<span class="cm">  *&lt;center&gt;&lt;a href=&quot;http:\\www.toomoss.com&quot;&gt;http://www.toomoss.com&lt;/a&gt;&lt;/center&gt;</span>
<span class="cm">  *&lt;center&gt;All Rights Reserved&lt;/center&gt;&lt;/h3&gt;</span>
<span class="cm">  * </span>
<span class="cm">  ******************************************************************************</span>
<span class="cm">  */</span><span class="w"></span>
<span class="cp">#ifndef __USB2NAND_H_</span>
<span class="cp">#define __USB2NAND_H_</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span><span class="cp"></span>
<span class="cp">#ifndef OS_UNIX</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Windows.h&gt;</span><span class="cp"></span>
<span class="cp">#else</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="cp">#ifndef WINAPI</span>
<span class="cp">#define WINAPI</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="c1">//定义NAND操作时序参数</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">_NAND_TIMING_COMFIG</span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">FSMC_SetupTime</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">FSMC_WaitSetupTime</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">FSMC_HoldSetupTime</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">FSMC_HiZSetupTime</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">NAND_TIMING_COMFIG</span><span class="p">,</span><span class="o">*</span><span class="n">PNAND_TIMING_COMFIG</span><span class="p">;</span><span class="w"></span>

<span class="c1">//定义函数返回错误代码</span>
<span class="cp">#define NAND_SUCCESS             (0)   </span><span class="c1">//函数执行成功</span>
<span class="cp">#define NAND_ERR_NOT_SUPPORT     (-1)  </span><span class="c1">//适配器不支持该函数</span>
<span class="cp">#define NAND_ERR_USB_WRITE_FAIL  (-2)  </span><span class="c1">//USB写数据失败</span>
<span class="cp">#define NAND_ERR_USB_READ_FAIL   (-3)  </span><span class="c1">//USB读数据失败</span>
<span class="cp">#define NAND_ERR_CMD_FAIL        (-4)  </span><span class="c1">//命令执行失败</span>

<span class="cp">#ifdef __cplusplus</span>
<span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="cp">#endif</span>
<span class="cm">/**</span>
<span class="cm">  * @brief  初始化配置NAND接口，该函数必须调用</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  ChipIndex NAND芯片片选号，取值0或者1</span>
<span class="cm">  * @param  PowerLevel NAND接口电压，1-1.8V，3-3.3V</span>
<span class="cm">  * @param  pTimeConfig 对NAND进行读写操作的时间参数</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_Init</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">PowerLevel</span><span class="p">,</span><span class="n">PNAND_TIMING_COMFIG</span><span class="w"> </span><span class="n">pTimeConfig</span><span class="p">);</span><span class="w"></span>

<span class="c1">//NAND操作底层函数，调用这些函数理论上可以读写控制任何NAND芯片，底层操作函数不会自动输出片选信号，需要程序控制片选信号输出</span>
<span class="cm">/**</span>
<span class="cm">  * @brief  控制片选信号输出低电平</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  ChipIndex NAND芯片片选号，取值0或者1</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_Select</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">);</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm">  * @brief  控制片选信号输出高电平</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  ChipIndex NAND芯片片选号，取值0或者1</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_Unselect</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">);</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm">  * @brief  NAND接口输出命令数据</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  pCmds 命令存储数据缓冲区</span>
<span class="cm">  * @param  CmdsLen 需要发送的命令数</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_SendCmd</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pCmds</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">CmdsLen</span><span class="p">);</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm">  * @brief  NAND接口输出地址数据</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  pAddrs 地址存储数据缓冲区</span>
<span class="cm">  * @param  AddrsLen 需要发送的地址数据字节数</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_SendAddr</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pAddrs</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">AddrsLen</span><span class="p">);</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm">  * @brief  NAND接口输出数据</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  pWriteData 数据存储缓冲区</span>
<span class="cm">  * @param  WriteDataLen 需要发送的数据字节数</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_WriteData</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pWriteData</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">WriteDataLen</span><span class="p">);</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm">  * @brief  NAND接口读取数据</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  pReadData 数据存储缓冲区</span>
<span class="cm">  * @param  ReadDataLen 需要读取的数据字节数</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_ReadData</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pReadData</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ReadDataLen</span><span class="p">);</span><span class="w"></span>
<span class="cm">/**</span>
<span class="cm">  * @brief  等待NAND接口的RB信号变高</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  ChipIndex 需要等待的RB通道号，0-RB0，1-RB1</span>
<span class="cm">  * @param  TimeOutOfMs 等待RB信号变高的超时时间，单位为毫秒，若设置为0则表示一直等待，直到变高后才返回</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错,0-等待超时且RB为低，1-超时时间范围内检测到RB为高</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_WaitReady</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">TimeOutOfMs</span><span class="p">);</span><span class="w"></span>



<span class="c1">//NAND操作高层函数</span>
<span class="cm">/**</span>
<span class="cm">  * @brief  发送RESET(0xFF)命令并等待RB信号变高</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  ChipIndex CE和RB自动输出通道号，0-CE0,RB0;1-CE1,RB1</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错,0-等待超时且RB为低，1-超时时间范围内检测到RB变高</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_Reset</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">);</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm">  * @brief  获取NAND Flash芯片的状态信息</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  ChipIndex 自动输出的NAND芯片片选号，取值0或者1</span>
<span class="cm">  * @param  pStatus 状态信息存储指针</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_ReadStatus</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">pStatus</span><span class="p">);</span><span class="w"></span>


<span class="cm">/**</span>
<span class="cm">  * @brief  获取NAND Flash芯片ID信息</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  ChipIndex 自动输出的NAND芯片片选号，取值0或者1</span>
<span class="cm">  * @param  IDAddr 读取ID的地址信息</span>
<span class="cm">  * @param  pID 芯片ID存储缓冲区首地址</span>
<span class="cm">  * @param  IDLen 读取ID数据字节数</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_ReadID</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">IDAddr</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pID</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">IDLen</span><span class="p">);</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm">  * @brief  向NAND Flash写入数据，建议按照整页写，然后再将该函数返回的ECC写入备用区，以便以后读取的时候将读出数据的ECC和写入ECC做对比，实现对数据的校验</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  ChipIndex NAND芯片片选号，取值0或者1</span>
<span class="cm">  * @param  pCmds 写数据的命令</span>
<span class="cm">  * @param  CmdsLen 写数据命令字节数</span>
<span class="cm">  * @param  pAddrs 写数据的地址</span>
<span class="cm">  * @param  AddrLen 写数据的地址字节数</span>
<span class="cm">  * @param  pWriteData 待写入NAND Flash芯片的数据缓冲区首地址</span>
<span class="cm">  * @param  NumByteToWrite 待写入NAND Flash芯片的数据字节数</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_WritePage</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pCmds</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">CmdsLen</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pAddrs</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">AddrLen</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pWriteData</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">NumByteToWrite</span><span class="p">);</span><span class="w"></span>
<span class="cm">/**</span>
<span class="cm">  * @brief  从NAND Flash读出数据</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  ChipIndex NAND芯片片选号，取值0或者1</span>
<span class="cm">  * @param  pCmds 读数据的命令</span>
<span class="cm">  * @param  CmdsLen 读数据命令字节数</span>
<span class="cm">  * @param  pAddrs 读数据的地址</span>
<span class="cm">  * @param  AddrLen 读数据的地址字节数</span>
<span class="cm">  * @param  pReadData 存储读出数据的缓冲区首地址</span>
<span class="cm">  * @param  NumByteToRead 待读出的数据字节数</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_ReadPage</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pCmds</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">CmdsLen</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pAddrs</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">AddrLen</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pReadData</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">NumByteToRead</span><span class="p">);</span><span class="w"></span>
<span class="cm">/**</span>
<span class="cm">  * @brief  按块擦出NAND Flash数据，擦出后所有数据变成0xFF</span>
<span class="cm">  * @param  DevHandle 设备索引号</span>
<span class="cm">  * @param  ChipIndex NAND芯片片选号，取值0或者1</span>
<span class="cm">  * @param  pCmds 擦除数据的命令</span>
<span class="cm">  * @param  CmdsLen 擦除数据命令字节数</span>
<span class="cm">  * @param  pAddrs 擦除数据的地址</span>
<span class="cm">  * @param  AddrLen 擦除数据的地址字节数</span>
<span class="cm">  * @retval 函数执行状态，小于0函数执行出错</span>
<span class="cm">  */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="nf">NAND_EraseBlock</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">DevHandle</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">ChipIndex</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pCmds</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">CmdsLen</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pAddrs</span><span class="p">,</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">AddrLen</span><span class="p">);</span><span class="w"></span>


<span class="cp">#ifdef __cplusplus</span>
<span class="p">}</span><span class="w"></span>
<span class="cp">#endif</span>

<span class="cp">#endif</span>
</pre></div>
</div> 
<div id="winchm_template_footer">Copyright &copy; 2018. All rights reserved.</div>
</body>
</html>
